{"is_source_file": true, "format": "TypeScript", "description": "This file defines the LangChainAgent class in TypeScript, which implements a minimal agent-like orchestrator for streaming reasoning based on chat messages and optionally using MCP-like tools such as read, write, and diff. It serves as a lightweight placeholder for selecting a 'langchain' provider in a VSCode extension environment without requiring full dependencies.", "external_files": ["../ChatService", "../../commands/mcpTools"], "external_methods": ["ensureMcpCommandsRegistered", "mcpReadFile", "mcpWriteFile", "mcpDiffApply", "mcpProduceDiff"], "published": ["LangChainAgent"], "classes": [{"name": "LangChainAgent", "description": "A lightweight agent class implementing the ChatProvider interface; it handles streaming chat interactions and optionally integrates MCP-like file tools based on user message heuristics."}], "methods": [{"name": "stream( stream", "description": "Streams reasoning responses based on chat messages, detects intent for file read/write/diff operations, executes corresponding MCP tool functions, and streams the output incrementally to the UI.", "scope": "LangChainAgent", "scopeKind": "class"}, {"name": "constructor() { constructor", "scope": "LangChainAgent", "scopeKind": "class", "description": "unavailable"}], "calls": ["ensureMcpCommandsRegistered", "mcpReadFile", "mcpProduceDiff", "mcpDiffApply", "mcpWriteFile"], "search-terms": ["LangChainAgent", "ChatProvider", "mcpTools", "streaming reasoning", "file operations", "diff apply", "VSCode extension"], "state": 2, "file_id": 28, "knowledge_revision": 108, "git_revision": "c187648fc404af9ec12e4741c1fd672c22348bed", "revision_history": [{"76": ""}, {"93": "8d2848e0c0dd6eb902653875055f8d3ab464ce16"}, {"108": "c187648fc404af9ec12e4741c1fd672c22348bed"}], "ctags": [{"_type": "tag", "name": "LangChainAgent", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^export class LangChainAgent implements ChatProvider {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "apply", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^          const apply = await mcpDiffApply(pathMatch, proposed || '');$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "chunks", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const chunks: string[] = [];$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^  constructor() {$/", "language": "TypeScript", "kind": "method", "scope": "LangChainAgent", "scopeKind": "class"}, {"_type": "tag", "name": "content", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^          const content = await mcpReadFile(pathMatch);$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "enableDiff", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^  private readonly enableDiff: boolean;$/", "language": "TypeScript", "kind": "property", "scope": "LangChainAgent", "scopeKind": "class"}, {"_type": "tag", "name": "enableRead", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^  private readonly enableRead: boolean;$/", "language": "TypeScript", "kind": "property", "scope": "LangChainAgent", "scopeKind": "class"}, {"_type": "tag", "name": "enableWrite", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^  private readonly enableWrite: boolean;$/", "language": "TypeScript", "kind": "property", "scope": "LangChainAgent", "scopeKind": "class"}, {"_type": "tag", "name": "frequencyPenalty", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^  private readonly frequencyPenalty: number | undefined;$/", "language": "TypeScript", "kind": "property", "scope": "LangChainAgent", "scopeKind": "class"}, {"_type": "tag", "name": "full", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^        const full = chunks.join('');$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "i", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const wantsDiff = this.enableDiff && \\/(diff|patch)\\\\b\\/i.test(userContent);$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "i", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const wantsRead = this.enableRead && \\/(read|show|open)\\\\s+file\\/i.test(userContent);$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "i", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const wantsWrite = this.enableWrite && \\/(write|save|replace)\\\\s+file\\/i.test(userContent);$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "legacyTe", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const legacyTe = vscode.workspace.getConfiguration('teCopilot');$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.constructor", "scopeKind": "method"}, {"_type": "tag", "name": "lower", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const lower = userContent.toLowerCase();$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "maxTokens", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^  private readonly maxTokens: number | undefined;$/", "language": "TypeScript", "kind": "property", "scope": "LangChainAgent", "scopeKind": "class"}, {"_type": "tag", "name": "maybePathInfo", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const maybePathInfo = pathMatch ? `Target path: ${pathMatch}\\\\n` : 'No explicit file path de/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "ok", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^          const ok = await mcpWriteFile(pathMatch, textToWrite, { append: true });$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "oldCfg", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const oldCfg = vscode.workspace.getConfiguration('kaviaChat');$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.constructor", "scopeKind": "method"}, {"_type": "tag", "name": "p", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^        for (const p of parts) {$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "parts", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^        const parts = full.split(\\/(\\\\s+)\\/);$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "pathMatch", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const pathMatch = userContent.match(\\/[\"'`](.+?\\\\.[a-zA-Z0-9]+)[\"'`]\\/)?.[1] ||$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "presencePenalty", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^  private readonly presencePenalty: number | undefined;$/", "language": "TypeScript", "kind": "property", "scope": "LangChainAgent", "scopeKind": "class"}, {"_type": "tag", "name": "primary", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const primary = vscode.workspace.getConfiguration('teCopilo');$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.constructor", "scopeKind": "method"}, {"_type": "tag", "name": "proposed", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^          const proposed = await mcpProduceDiff(pathMatch);$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "push", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const push = (s: string) => chunks.push(s);$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "stream", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^  stream($/", "language": "TypeScript", "kind": "method", "scope": "LangChainAgent", "scopeKind": "class"}, {"_type": "tag", "name": "systemPrompt", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^  private readonly systemPrompt: string | undefined;$/", "language": "TypeScript", "kind": "property", "scope": "LangChainAgent", "scopeKind": "class"}, {"_type": "tag", "name": "temperature", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^  private readonly temperature: number | undefined;$/", "language": "TypeScript", "kind": "property", "scope": "LangChainAgent", "scopeKind": "class"}, {"_type": "tag", "name": "textToWrite", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^          const textToWrite = `\\/\\/ Updated by LangChainAgent at ${new Date().toISOString()}\\\\n`/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "topP", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^  private readonly topP: number | undefined;$/", "language": "TypeScript", "kind": "property", "scope": "LangChainAgent", "scopeKind": "class"}, {"_type": "tag", "name": "userContent", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const userContent = params.messages.find(m => m.role === 'user')?.content ?? '';$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "wantsDiff", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const wantsDiff = this.enableDiff && \\/(diff|patch)\\\\b\\/i.test(userContent);$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "wantsRead", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const wantsRead = this.enableRead && \\/(read|show|open)\\\\s+file\\/i.test(userContent);$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}, {"_type": "tag", "name": "wantsWrite", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/providers/LangChainAgent.ts", "pattern": "/^    const wantsWrite = this.enableWrite && \\/(write|save|replace)\\\\s+file\\/i.test(userContent);$/", "language": "TypeScript", "kind": "constant", "scope": "LangChainAgent.stream", "scopeKind": "method"}], "hash": "9f7a316d5c36912248894da8aac2f203", "format-version": 4, "code-base-name": "frontend", "filename": "vscode-extension/src/chat/providers/LangChainAgent.ts", "fields": [{"name": "private readonly enableDiff: boolean;", "scope": "LangChainAgent", "scopeKind": "class", "description": "unavailable"}, {"name": "private readonly enableRead: boolean;", "scope": "LangChainAgent", "scopeKind": "class", "description": "unavailable"}, {"name": "private readonly enableWrite: boolean;", "scope": "LangChainAgent", "scopeKind": "class", "description": "unavailable"}, {"name": "private readonly frequencyPenalty: number | undefined;", "scope": "LangChainAgent", "scopeKind": "class", "description": "unavailable"}, {"name": "private readonly maxTokens: number | undefined;", "scope": "LangChainAgent", "scopeKind": "class", "description": "unavailable"}, {"name": "private readonly presencePenalty: number | undefined;", "scope": "LangChainAgent", "scopeKind": "class", "description": "unavailable"}, {"name": "private readonly systemPrompt: string | undefined;", "scope": "LangChainAgent", "scopeKind": "class", "description": "unavailable"}, {"name": "private readonly temperature: number | undefined;", "scope": "LangChainAgent", "scopeKind": "class", "description": "unavailable"}, {"name": "private readonly topP: number | undefined;", "scope": "LangChainAgent", "scopeKind": "class", "description": "unavailable"}]}