{"is_source_file": true, "format": "TypeScript", "description": "This file defines a set of commands and functions for file operations within a VSCode extension context, including reading, writing, producing diffs, and applying diffs to files.", "external_files": ["vscode", "path", "fs/promises"], "external_methods": ["vscode.commands.registerCommand", "vscode.window.showWarningMessage", "vscode.window.showErrorMessage", "fs.stat", "fs.readFile", "fs.writeFile", "fs.appendFile", "fs.mkdir"], "published": ["ensureMcpCommandsRegistered", "mcpReadFile", "mcpWriteFile", "mcpProduceDiff", "mcpDiffApply"], "classes": [], "methods": [{"name": "export function ensureMcpCommandsRegistered() { ensureMcpCommandsRegistered", "description": "Registers MCP-like tool commands for reading, writing, diffing, and applying diffs to files. Ensures registration occurs only once.", "scope": "", "scopeKind": ""}, {"name": "export async function mcpReadFile(filePath?: string): Promise<string | undefined> { mcpReadFile", "description": "Reads the content of a specified file within the current workspace, returning its contents as a string.", "scope": "", "scopeKind": ""}, {"name": "export async function mcpWriteFile(filePath?: string, content?: string, options?: { append?: boo/ mcpWriteFile", "description": "Writes or appends content to a specified file in the workspace, after user confirmation.", "scope": "", "scopeKind": ""}, {"name": "export async function mcpProduceDiff(filePath?: string): Promise<string | undefined> { mcpProduceDiff", "description": "Creates a simplistic diff output for a given file, prepending a header indicating the update time.", "scope": "", "scopeKind": ""}, {"name": "export async function mcpDiffApply(filePath?: string, diff?: string): Promise<boolean> { mcpDiffApply", "description": "Applies a generated diff to a target file, in this demo, adding a header line if not present.", "scope": "", "scopeKind": ""}, {"name": "async function resolveWorkspacePath(filePath?: string): Promise<string | undefined> { resolveWorkspacePath", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["resolveWorkspacePath", "fs.stat", "fs.readFile", "fs.appendFile", "fs.writeFile", "vscode.commands.registerCommand", "vscode.window.showWarningMessage", "vscode.window.showErrorMessage"], "search-terms": ["mcpTools", "teCopilo", "workspace file", "diff", "applyDiff", "registerCommand", "file operations", "VSCode extension"], "state": 2, "file_id": 29, "knowledge_revision": 110, "git_revision": "c187648fc404af9ec12e4741c1fd672c22348bed", "revision_history": [{"78": ""}, {"94": "8d2848e0c0dd6eb902653875055f8d3ab464ce16"}, {"109": "c187648fc404af9ec12e4741c1fd672c22348bed"}, {"110": "c187648fc404af9ec12e4741c1fd672c22348bed"}], "ctags": [{"_type": "tag", "name": "abs", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^    const abs = await resolveWorkspacePath(filePath);$/", "language": "TypeScript", "kind": "constant", "scope": "mcpReadFile", "scopeKind": "function"}, {"_type": "tag", "name": "abs", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^    const abs = await resolveWorkspacePath(filePath);$/", "language": "TypeScript", "kind": "constant", "scope": "mcpWriteFile", "scopeKind": "function"}, {"_type": "tag", "name": "abs", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^  const abs = await resolveWorkspacePath(filePath);$/", "language": "TypeScript", "kind": "constant", "scope": "mcpDiffApply", "scopeKind": "function"}, {"_type": "tag", "name": "abs", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^  const abs = await resolveWorkspacePath(filePath);$/", "language": "TypeScript", "kind": "constant", "scope": "mcpProduceDiff", "scopeKind": "function"}, {"_type": "tag", "name": "abs", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^  const abs = path.join(folders[0].uri.fsPath, filePath);$/", "language": "TypeScript", "kind": "constant", "scope": "resolveWorkspacePath", "scopeKind": "function"}, {"_type": "tag", "name": "after", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^  const after = before.startsWith(header) ? before : header + before;$/", "language": "TypeScript", "kind": "constant", "scope": "mcpDiffApply", "scopeKind": "function"}, {"_type": "tag", "name": "after", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^  const after = before.startsWith(header) ? before : header + before;$/", "language": "TypeScript", "kind": "constant", "scope": "mcpProduceDiff", "scopeKind": "function"}, {"_type": "tag", "name": "allowed", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^    const allowed = folders.some(f => filePath.startsWith(f.uri.fsPath));$/", "language": "TypeScript", "kind": "constant", "scope": "resolveWorkspacePath", "scopeKind": "function"}, {"_type": "tag", "name": "allowed", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^  const allowed = abs.startsWith(folders[0].uri.fsPath);$/", "language": "TypeScript", "kind": "constant", "scope": "resolveWorkspacePath", "scopeKind": "function"}, {"_type": "tag", "name": "before", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^  const before = (await fs.readFile(abs, 'utf-8').catch(() => '')) ?? '';$/", "language": "TypeScript", "kind": "constant", "scope": "mcpDiffApply", "scopeKind": "function"}, {"_type": "tag", "name": "before", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^  const before = (await fs.readFile(abs, 'utf-8').catch(() => '')) ?? '';$/", "language": "TypeScript", "kind": "constant", "scope": "mcpProduceDiff", "scopeKind": "function"}, {"_type": "tag", "name": "buf", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^    const buf = await fs.readFile(abs, 'utf-8');$/", "language": "TypeScript", "kind": "constant", "scope": "mcpReadFile", "scopeKind": "function"}, {"_type": "tag", "name": "diff", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^  const diff =$/", "language": "TypeScript", "kind": "constant", "scope": "mcpProduceDiff", "scopeKind": "function"}, {"_type": "tag", "name": "editor", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^    const editor = vscode.window.activeTextEditor;$/", "language": "TypeScript", "kind": "constant", "scope": "resolveWorkspacePath", "scopeKind": "function"}, {"_type": "tag", "name": "ensureMcpCommandsRegistered", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^export function ensureMcpCommandsRegistered() {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "folders", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^  const folders = vscode.workspace.workspaceFolders;$/", "language": "TypeScript", "kind": "constant", "scope": "resolveWorkspacePath", "scopeKind": "function"}, {"_type": "tag", "name": "header", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^  const header = `\\/\\/ Updated by TE-Copilo at ${new Date().toISOString()}\\\\n`;$/", "language": "TypeScript", "kind": "constant", "scope": "mcpDiffApply", "scopeKind": "function"}, {"_type": "tag", "name": "header", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^  const header = `\\/\\/ Updated by TE-Copilo at ${new Date().toISOString()}\\\\n`;$/", "language": "TypeScript", "kind": "constant", "scope": "mcpProduceDiff", "scopeKind": "function"}, {"_type": "tag", "name": "mcpDiffApply", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^export async function mcpDiffApply(filePath?: string, diff?: string): Promise<boolean> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "mcpProduceDiff", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^export async function mcpProduceDiff(filePath?: string): Promise<string | undefined> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "mcpReadFile", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^export async function mcpReadFile(filePath?: string): Promise<string | undefined> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "mcpWriteFile", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^export async function mcpWriteFile(filePath?: string, content?: string, options?: { append?: boo/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "ok", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^    const ok = await vscode.window.showWarningMessage($/", "language": "TypeScript", "kind": "constant", "scope": "mcpWriteFile", "scopeKind": "function"}, {"_type": "tag", "name": "ok", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^  const ok = await vscode.window.showWarningMessage($/", "language": "TypeScript", "kind": "constant", "scope": "mcpDiffApply", "scopeKind": "function"}, {"_type": "tag", "name": "registered", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^let registered = false;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "resolveWorkspacePath", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^async function resolveWorkspacePath(filePath?: string): Promise<string | undefined> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "stat", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/commands/mcpTools.ts", "pattern": "/^    const stat = await fs.stat(abs).catch(() => null);$/", "language": "TypeScript", "kind": "constant", "scope": "mcpReadFile", "scopeKind": "function"}], "hash": "64f77b612698cbb243151373271ef913", "format-version": 4, "code-base-name": "frontend", "filename": "vscode-extension/src/commands/mcpTools.ts", "fields": [{"name": "let registered = false;", "scope": "", "scopeKind": "", "description": "unavailable"}]}