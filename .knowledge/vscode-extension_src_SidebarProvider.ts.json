{"is_source_file": true, "format": "TypeScript", "description": "This file defines a VSCode extension component called SidebarProvider, responsible for providing and managing a sidebar webview for the teCoPilot Chat extension. It handles webview setup, message routing, context updates, and communication with the chat service and extension configurations.", "external_files": ["./messaging", "./chat/ChatService", "./context/activeEditorContext", "./context/workspaceContext"], "external_methods": ["postToWebview", "getNonce", "getActiveEditorContext", "getWorkspaceContext"], "published": ["SidebarProvider"], "classes": [{"name": "SidebarProvider", "description": "Class implementing the vscode.WebviewViewProvider interface to create and control the chat sidebar webview, including handling messages, rendering HTML, and updating context information."}], "methods": [{"name": "resolveWebviewView", "description": "Initializes and renders the webview, setting up message handlers and HTML content."}, {"name": "reveal", "description": "Reveals or focuses the sidebar webview within VSCode."}, {"name": "getHtmlForWebview", "description": "Generates the HTML content for the webview, injecting necessary scripts, styles, and CSP policies."}, {"name": "postMessage", "description": "Sends a message to the webview."}, {"name": "emitContextUpdate", "description": "Sends updated workspace and editor context to the webview."}, {"name": "function getConfigSnapshot(): Record<string, unknown> { getConfigSnapshot", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function getContextSnapshot(): Record<string, unknown> { getContextSnapshot", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function getNonce(): string { getNonce", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["vscode.window.onDidChangeActiveTextEditor", "vscode.window.onDidChangeTextEditorSelection", "vscode.window.onDidChangeVisibleTextEditors", "vscode.workspace.onDidChangeWorkspaceFolders", "vscode.commands.executeCommand", "webview.onDidReceiveMessage"], "search-terms": ["SidebarProvider", "WebviewViewProvider", "Messaging routing", "getHtmlForWebview", "getConfigSnapshot", "context update", "webview communication"], "state": 2, "file_id": 16, "knowledge_revision": 142, "git_revision": "715731bcfceb115e1702fbbe64ae73e57610e4b6", "revision_history": [{"33": ""}, {"47": "7b17b27f5bb9d40a9d618f6564721ca27e687a80"}, {"52": "9911d1deebe3de4819039a0190172b1cf356adea"}, {"57": "ffb29648f9282e70bd62284544effa1223d8e053"}, {"70": "794dfeb1fd40498e9d09a9aae926fd83f4585d57"}, {"80": "2ca3b6d061148df6a9e1f4fc65320bf3ad24ab7a"}, {"87": "8d2848e0c0dd6eb902653875055f8d3ab464ce16"}, {"88": "8d2848e0c0dd6eb902653875055f8d3ab464ce16"}, {"96": "8d2848e0c0dd6eb902653875055f8d3ab464ce16"}, {"102": "c187648fc404af9ec12e4741c1fd672c22348bed"}, {"103": "c187648fc404af9ec12e4741c1fd672c22348bed"}, {"104": "c187648fc404af9ec12e4741c1fd672c22348bed"}, {"115": "c187648fc404af9ec12e4741c1fd672c22348bed"}, {"117": "c187648fc404af9ec12e4741c1fd672c22348bed"}, {"119": "09174c7c6386acc5d1eccd8badec153825396517"}, {"120": "09174c7c6386acc5d1eccd8badec153825396517"}, {"121": "09174c7c6386acc5d1eccd8badec153825396517"}, {"142": "715731bcfceb115e1702fbbe64ae73e57610e4b6"}], "ctags": [{"_type": "tag", "name": "SidebarProvider", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^export class SidebarProvider implements vscode.WebviewViewProvider {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "appJs", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const appJs = webview.asWebviewUri(vscode.Uri.joinPath(mediaRoot, 'app.js'));$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^        const config = getConfigSnapshot();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "csp", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const csp = [$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "ctx", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^        const ctx = getContextSnapshot();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "ctx", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const ctx = getContextSnapshot();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "getConfigSnapshot", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^function getConfigSnapshot(): Record<string, unknown> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getContextSnapshot", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^function getContextSnapshot(): Record<string, unknown> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getNonce", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^function getNonce(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "html", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const html = this.getHtmlForWebview(webview);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "indexCss", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const indexCss = webview.asWebviewUri(vscode.Uri.joinPath(mediaRoot, 'styles.css'));$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "legacyCopilo", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^          const legacyCopilo = vscode.workspace.getConfiguration('teCopilo');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "legacyCopilo", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^  const legacyCopilo = vscode.workspace.getConfiguration('teCopilo');$/", "language": "TypeScript", "kind": "constant", "scope": "getConfigSnapshot", "scopeKind": "function"}, {"_type": "tag", "name": "legacyK", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^          const legacyK = vscode.workspace.getConfiguration('kaviaChat');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "legacyKavia", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^  const legacyKavia = vscode.workspace.getConfiguration('kaviaChat');$/", "language": "TypeScript", "kind": "constant", "scope": "getConfigSnapshot", "scopeKind": "function"}, {"_type": "tag", "name": "mediaRoot", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const mediaRoot = vscode.Uri.joinPath(this.context.extensionUri, 'media', 'webview');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^          const model = String($/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "nonce", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const nonce = getNonce();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^        const payload = (message as Extract<WebviewToExtensionMessage, { type: 'chat:send' }>).p/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "possible", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';$/", "language": "TypeScript", "kind": "constant", "scope": "getNonce", "scopeKind": "function"}, {"_type": "tag", "name": "primary", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^          const primary = vscode.workspace.getConfiguration('teCopilot');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "primary", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^  const primary = vscode.workspace.getConfiguration('teCopilot');$/", "language": "TypeScript", "kind": "constant", "scope": "getConfigSnapshot", "scopeKind": "function"}, {"_type": "tag", "name": "userText", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^        const userText = (payload?.text || '').trim();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "webview", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const webview = webviewView.webview;$/", "language": "TypeScript", "kind": "constant"}], "hash": "d48cfb9025b1984c67783a9d0a7074cd", "format-version": 4, "code-base-name": "frontend", "filename": "vscode-extension/src/SidebarProvider.ts"}