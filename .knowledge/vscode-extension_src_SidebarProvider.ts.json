{"is_source_file": true, "format": "TypeScript", "description": "This file defines a SidebarProvider class for a VSCode extension. It manages a webview panel, handles message routing between the webview and extension, and constructs the HTML content for the interface, including CSP policies and asset referencing. It also includes methods for revealing the view, handling messages, and generating a nonce for security.", "external_files": ["./messaging"], "external_methods": ["postToWebview", "getNonce"], "published": ["SidebarProvider"], "classes": [{"name": "SidebarProvider", "description": "Provides a sidebar webview panel in VSCode, managing message flow and UI rendering."}], "methods": [{"name": "resolveWebviewView", "description": "Initializes the webview panel, setting up HTML content and message handler."}, {"name": "reveal", "description": "Reveals or focuses the sidebar view."}, {"name": "getHtmlForWebview", "description": "Builds and returns the HTML content for the webview, including security policies and linked assets."}, {"name": "postMessage", "description": "Sends a message to the webview content."}, {"name": "function getConfigSnapshot(): Record<string, unknown> { getConfigSnapshot", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function getContextSnapshot(): Record<string, unknown> { getContextSnapshot", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "function getNonce(): string { getNonce", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["vscode.commands.executeCommand", "postToWebview", "webview.asWebviewUri", "vscode.Uri.joinPath", "webview.html", "webview.onDidReceiveMessage"], "search-terms": ["SidebarProvider", "webview", "message routing", "CSP nonce", "extension URI", "index.html in media"], "state": 2, "file_id": 16, "knowledge_revision": 47, "git_revision": "7b17b27f5bb9d40a9d618f6564721ca27e687a80", "revision_history": [{"33": ""}, {"47": "7b17b27f5bb9d40a9d618f6564721ca27e687a80"}], "ctags": [{"_type": "tag", "name": "SidebarProvider", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^export class SidebarProvider implements vscode.WebviewViewProvider {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "appJs", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const appJs = webview.asWebviewUri(vscode.Uri.joinPath(mediaRoot, 'app.js'));$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "chunks", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^        const chunks = reply.split(\\/(\\\\s+)\\/); \\/\\/ keep spaces$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^        const config = getConfigSnapshot();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^  const config = vscode.workspace.getConfiguration('kaviaChat');$/", "language": "TypeScript", "kind": "constant", "scope": "getConfigSnapshot", "scopeKind": "function"}, {"_type": "tag", "name": "context", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^        const context = getContextSnapshot();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "csp", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const csp = [$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "folders", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^  const folders = vscode.workspace.workspaceFolders?.map(f => f.name) ?? [];$/", "language": "TypeScript", "kind": "constant", "scope": "getContextSnapshot", "scopeKind": "function"}, {"_type": "tag", "name": "getConfigSnapshot", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^function getConfigSnapshot(): Record<string, unknown> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getContextSnapshot", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^function getContextSnapshot(): Record<string, unknown> {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "getNonce", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^function getNonce(): string {$/", "language": "TypeScript", "kind": "function"}, {"_type": "tag", "name": "html", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const html = this.getHtmlForWebview(webview);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^        let idx = 0;$/", "language": "TypeScript", "kind": "variable"}, {"_type": "tag", "name": "indexCss", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const indexCss = webview.asWebviewUri(vscode.Uri.joinPath(mediaRoot, 'styles.css'));$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "indexHtml", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const indexHtml = vscode.Uri.joinPath(mediaRoot, 'index.html');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "indexHtmlUri", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const indexHtmlUri = webview.asWebviewUri(indexHtml);$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "interval", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^        const interval = setInterval(() => {$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "mediaRoot", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const mediaRoot = vscode.Uri.joinPath(this.context.extensionUri, 'media', 'webview');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "nonce", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const nonce = getNonce();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "payload", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^        const payload = (message as Extract<WebviewToExtensionMessage, { type: 'chat:send' }>).p/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "possible", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^  const possible = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';$/", "language": "TypeScript", "kind": "constant", "scope": "getNonce", "scopeKind": "function"}, {"_type": "tag", "name": "reply", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^        const reply = `You said: ${userText}\\\\n\\\\n(MOCK RESPONSE)`;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "userText", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^        const userText = (payload?.text || '').trim();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "webview", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/SidebarProvider.ts", "pattern": "/^    const webview = webviewView.webview;$/", "language": "TypeScript", "kind": "constant"}], "hash": "6a8b5726ef7beaaada522beb8a3f492f", "format-version": 4, "code-base-name": "frontend", "filename": "vscode-extension/src/SidebarProvider.ts", "fields": [{"name": "let idx = 0;", "scope": "", "scopeKind": "", "description": "unavailable"}]}