{"is_source_file": true, "format": "TypeScript", "description": "This file defines a ChatService class in TypeScript for managing chat message streaming within a VSCode extension, including provider interface definitions, singleton management, start/stop streaming methods, and webview message posting.", "external_files": ["../messaging", "./providers/MockProvider", "vscode"], "external_methods": ["postToWebview"], "published": ["ChatMessage", "ChatConfig", "ChatContext", "ChatProvider", "ChatService"], "classes": [{"name": "ChatService", "description": "A singleton class that manages chat message streaming, provider selection, and communication with the VSCode webview."}], "methods": [{"name": "getInstance", "description": "Returns the singleton instance of ChatService, creating it if necessary."}, {"name": "startStreaming", "description": "Begins streaming a chat response based on user input, posting delta chunks and completion status to the webview."}, {"name": "stop", "description": "Stops current streaming operation and signals the webview to finalize the UI update."}, {"name": "stream(params: { stream", "scope": "ChatProvider", "scopeKind": "interface", "description": "unavailable"}], "calls": ["postToWebview"], "search-terms": ["ChatService", "streaming", "vscode.WebviewView", "MockProvider", "CancellationTokenSource"], "state": 2, "file_id": 22, "knowledge_revision": 49, "git_revision": "", "ctags": [{"_type": "tag", "name": "ChatConfig", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^export type ChatConfig = Record<string, unknown>;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ChatContext", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^export type ChatContext = Record<string, unknown>;$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ChatMessage", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^export type ChatMessage = {$/", "language": "TypeScript", "kind": "alias"}, {"_type": "tag", "name": "ChatProvider", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^export interface ChatProvider {$/", "language": "TypeScript", "kind": "interface"}, {"_type": "tag", "name": "ChatService", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^export class ChatService {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "assistantId", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^    const assistantId = String(Date.now());$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^    const config = vscode.workspace.getConfiguration('kaviaChat');$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "config", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^    const { userText, config, context, model, webviewView } = params;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "context", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^    const { userText, config, context, model, webviewView } = params;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "cts", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^    const cts = new vscode.CancellationTokenSource();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "instance", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^  private static instance: ChatService | null = null;$/", "language": "TypeScript", "kind": "property", "scope": "ChatService", "scopeKind": "class"}, {"_type": "tag", "name": "messages", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^    const messages: ChatMessage[] = [{ role: 'user', content: userText }];$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "model", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^    const { userText, config, context, model, webviewView } = params;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "provider", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^  private provider: ChatProvider;$/", "language": "TypeScript", "kind": "property", "scope": "ChatService", "scopeKind": "class"}, {"_type": "tag", "name": "providerId", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^    const providerId = (config.get<string>('kaviaChat.provider') || 'mock').toLowerCase();$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "stream", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^  stream(params: {$/", "language": "TypeScript", "kind": "method", "scope": "ChatProvider", "scopeKind": "interface"}, {"_type": "tag", "name": "userText", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^    const { userText, config, context, model, webviewView } = params;$/", "language": "TypeScript", "kind": "constant"}, {"_type": "tag", "name": "webviewView", "path": "/home/kavia/workspace/code-generation/user-request-test-project-2321-2330/vscode-extension/src/chat/ChatService.ts", "pattern": "/^    const { userText, config, context, model, webviewView } = params;$/", "language": "TypeScript", "kind": "constant"}], "hash": "a804059e922b157e7a76cd05b0860603", "format-version": 4, "code-base-name": "frontend", "filename": "vscode-extension/src/chat/ChatService.ts", "fields": [{"name": "export interface ChatProvider {", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "private static instance: ChatService | null = null;", "scope": "ChatService", "scopeKind": "class", "description": "unavailable"}, {"name": "private provider: ChatProvider;", "scope": "ChatService", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"49": ""}]}